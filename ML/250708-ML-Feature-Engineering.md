# 📅 2025-07-08 TIL - 파생 변수(Feature Engineering) 정리 (ML Advanced 2-1)

---

## 🧩 파생 변수란?

> 기존 변수의 정보를 정제/조합하여 생성한 새로운 변수

- 모델의 입력 형식에 맞추거나 성능 향상에 기여  
- 문제 해결을 위해 도메인 지식과 변수 간 상호작용을 반영

---

## 🧠 파생 변수의 분류

| 유형 | 설명 |
|------|------|
| **함수 변환** | 로그, 제곱근, Box-Cox 등 수치형 변환 |
| **스케일링** | Min-Max, 표준화, 로버스트 등 |
| **구간화** | 연속형 변수를 범주형으로 변환 |
| **시간 변수** | 날짜에서 연, 월, 시, 요일 등 추출 |
| **텍스트 분할** | 이름, 주소 등 문자열을 쪼개어 정보 추출 |
| **상호작용 변수** | 여러 변수 조합 (면적, 가격 비율 등) |
| **통계 기반 변수** | 평균, 합계, 표준편차 등 그룹 통계치 기반 |

---

## 🔧 함수 변환 예시

| 변환 | 효과 | 특징 |
|------|------|------|
| 로그(log) | 정규성 향상, 분포 조정 | 0 이하 불가, np.log1p 사용 |
| 제곱근 | 비대칭 분포 완화 | 로그보다 덜 민감 |
| Box-Cox | λ 값으로 다양한 변환 결합 | scipy boxcox1p 사용 |

---

## 📏 스케일링 기법

- **Min-Max**: 0~1 정규화  
- **Z-score (표준화)**: 평균 0, 표준편차 1  
- **Robust Scaling**: 중앙값 기준 → 이상치에 강건

---

## 🧭 시간 변수 생성

- 날짜 → 연도, 월, 일, 시, 요일, 주차, 년 중 일수 등 분해  
- 시간대 구간화 (예: 새벽, 오전, 오후 등)  
- 시간 차 계산 (예: 첫 거래일부터 며칠 경과)

---

## ✂️ 문자열 변수 처리

- 이름 → 성/이름 나누기  
- 제목/카테고리 → 고유 키워드 추출  
- 주소 → 지역/시/구 등 추출 가능

---

## 🔄 상호작용 변수 예시

- **면적 합산**: 지하 + 1층 + 2층 = 연면적  
- **등급 파생**: 연 납부금액 기반 멤버십 등급 생성  
- **시설 유무**: 수영장, 차고 등 여부를 이진 변수로

---

## 📊 통계 기반 변수 예시

- **카테고리 평균 가격 대비 비율** = 개별 가격 / 그룹 평균  
- **고객 평균 대출금액**  
- **시간 기반 통계**: 고객별 평균 대출 기간, 최대값 등

---

## 🧪 실전 적용 시 유의사항

- 변수 간 **다중공선성**에 주의 (상관관계 높은 변수 많을 경우)  
- **과적합 방지**를 위해 정규화 or 검증셋 기반 통계 사용  
- 생성된 변수의 **해석 가능성 유지**

---

## ✍️ 오늘의 한 줄 요약
> 파생 변수는 모델의 입력을 풍부하게 만들어주는 **가장 강력한 무기 중 하나**이며,  
> 도메인 지식 + 수리적 변환을 적절히 조합하여 성능 향상과 해석력 향상 모두를 달성할 수 있다.

